<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‰é’®åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #0056b3;
        }
        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .success { background: #28a745; }
        .warning { background: #ffc107; color: black; }
        .danger { background: #dc3545; }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
        }
        .file-input {
            display: none;
        }
        .file-label {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            display: inline-block;
        }
        .file-label:hover {
            background: #545b62;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ æŒ‰é’®åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•å„ç§æŒ‰é’®å’Œäº¤äº’åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>

    <div class="test-section">
        <h2>ğŸ“ æ–‡ä»¶ä¸Šä¼ æµ‹è¯•</h2>
        <p>æµ‹è¯•æ–‡ä»¶é€‰æ‹©å’Œä¸Šä¼ åŠŸèƒ½</p>
        
        <input type="file" id="file-upload" class="file-input" multiple accept=".xlsx,.xls,.csv,.txt,.json,.pdf,.jpg,.jpeg,.png,.mp4,.avi,.mov">
        <label for="file-upload" class="file-label">é€‰æ‹©æ–‡ä»¶</label>
        
        <div id="file-list"></div>
        
        <button class="button success" onclick="testUpload()">å¼€å§‹ä¸Šä¼ </button>
        <button class="button warning" onclick="clearFiles()">æ¸…ç©ºæ–‡ä»¶</button>
    </div>

    <div class="test-section">
        <h2>ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯æµ‹è¯•</h2>
        <p>æµ‹è¯•ç”¨æˆ·ä¿¡æ¯æ›´æ–°åŠŸèƒ½</p>
        
        <input type="text" id="username" placeholder="ç”¨æˆ·å" value="æµ‹è¯•ç”¨æˆ·">
        <input type="text" id="department" placeholder="éƒ¨é—¨" value="æŠ€æœ¯éƒ¨">
        
        <button class="button success" onclick="saveProfile()">ä¿å­˜åŸºæœ¬ä¿¡æ¯</button>
        <button class="button warning" onclick="resetProfile()">é‡ç½®ä¿¡æ¯</button>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ è®¾å¤‡ç®¡ç†æµ‹è¯•</h2>
        <p>æµ‹è¯•è®¾å¤‡æ·»åŠ åŠŸèƒ½</p>
        
        <button class="button success" onclick="addDevice()">æ·»åŠ æ–°è®¾å¤‡</button>
        <button class="button warning" onclick="resetDevice()">é‡ç½®è®¾å¤‡</button>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š æ“ä½œæ—¥å¿—</h2>
        <div id="log" class="log"></div>
        <button class="button" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
    </div>

    <script>
        let selectedFiles = [];
        let isAddingDevice = false;

        // æ–‡ä»¶é€‰æ‹©å¤„ç†
        document.getElementById('file-upload').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            selectedFiles = files;
            displayFiles(files);
            log('æ–‡ä»¶é€‰æ‹©æˆåŠŸ', `é€‰æ‹©äº† ${files.length} ä¸ªæ–‡ä»¶`);
        });

        // æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨
        function displayFiles(files) {
            const fileList = document.getElementById('file-list');
            if (files.length === 0) {
                fileList.innerHTML = '<p>æœªé€‰æ‹©æ–‡ä»¶</p>';
                return;
            }

            let html = '<h3>å·²é€‰æ‹©æ–‡ä»¶:</h3>';
            files.forEach((file, index) => {
                html += `
                    <div style="border: 1px solid #ddd; padding: 10px; margin: 5px 0; border-radius: 4px;">
                        <strong>${file.name}</strong><br>
                        å¤§å°: ${formatFileSize(file.size)}<br>
                        ç±»å‹: ${file.type || 'æœªçŸ¥'}
                    </div>
                `;
            });
            fileList.innerHTML = html;
        }

        // æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // æµ‹è¯•ä¸Šä¼ åŠŸèƒ½
        function testUpload() {
            if (selectedFiles.length === 0) {
                log('é”™è¯¯', 'è¯·å…ˆé€‰æ‹©æ–‡ä»¶');
                return;
            }

            log('å¼€å§‹ä¸Šä¼ ', `å¼€å§‹å¤„ç† ${selectedFiles.length} ä¸ªæ–‡ä»¶`);
            
            // æ¨¡æ‹Ÿä¸Šä¼ è¿‡ç¨‹
            selectedFiles.forEach((file, index) => {
                setTimeout(() => {
                    log('ä¸Šä¼ è¿›åº¦', `${file.name} - ${Math.round((index + 1) / selectedFiles.length * 100)}%`);
                    
                    if (index === selectedFiles.length - 1) {
                        log('ä¸Šä¼ å®Œæˆ', 'æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼');
                    }
                }, index * 500);
            });
        }

        // æ¸…ç©ºæ–‡ä»¶
        function clearFiles() {
            selectedFiles = [];
            document.getElementById('file-upload').value = '';
            document.getElementById('file-list').innerHTML = '<p>æœªé€‰æ‹©æ–‡ä»¶</p>';
            log('æ“ä½œ', 'æ–‡ä»¶åˆ—è¡¨å·²æ¸…ç©º');
        }

        // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
        function saveProfile() {
            const username = document.getElementById('username').value;
            const department = document.getElementById('department').value;
            
            if (!username || !department) {
                log('é”™è¯¯', 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯');
                return;
            }

            log('ä¿å­˜æˆåŠŸ', `ç”¨æˆ·å: ${username}, éƒ¨é—¨: ${department}`);
            log('æ¨¡æ‹Ÿ', 'ä¿¡æ¯å·²ä¿å­˜åˆ°æ•°æ®åº“');
        }

        // é‡ç½®ç”¨æˆ·ä¿¡æ¯
        function resetProfile() {
            document.getElementById('username').value = 'æµ‹è¯•ç”¨æˆ·';
            document.getElementById('department').value = 'æŠ€æœ¯éƒ¨';
            log('æ“ä½œ', 'ç”¨æˆ·ä¿¡æ¯å·²é‡ç½®');
        }

        // æ·»åŠ è®¾å¤‡
        function addDevice() {
            if (isAddingDevice) {
                log('æ“ä½œ', 'è®¾å¤‡æ·»åŠ ä¸­ï¼Œè¯·ç¨å€™...');
                return;
            }

            isAddingDevice = true;
            const button = event.target;
            button.textContent = 'æ·»åŠ ä¸­...';
            button.disabled = true;

            log('å¼€å§‹æ·»åŠ ', 'æ­£åœ¨æ·»åŠ æ–°è®¾å¤‡...');

            setTimeout(() => {
                isAddingDevice = false;
                button.textContent = 'æ·»åŠ æ–°è®¾å¤‡';
                button.disabled = false;
                log('æ·»åŠ æˆåŠŸ', 'æ–°è®¾å¤‡æ·»åŠ æˆåŠŸï¼');
            }, 2000);
        }

        // é‡ç½®è®¾å¤‡çŠ¶æ€
        function resetDevice() {
            isAddingDevice = false;
            const button = document.querySelector('button[onclick="addDevice()"]');
            button.textContent = 'æ·»åŠ æ–°è®¾å¤‡';
            button.disabled = false;
            log('æ“ä½œ', 'è®¾å¤‡çŠ¶æ€å·²é‡ç½®');
        }

        // æ—¥å¿—è®°å½•
        function log(type, message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type}: ${message}`;
            
            logDiv.innerHTML += logEntry + '<br>';
            logDiv.scrollTop = logDiv.scrollHeight;
            
            console.log(logEntry);
        }

        // æ¸…ç©ºæ—¥å¿—
        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        // é¡µé¢åŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            log('ç³»ç»Ÿ', 'æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            log('æç¤º', 'è¯·æµ‹è¯•å„ç§æŒ‰é’®åŠŸèƒ½');
        });
    </script>
</body>
</html>
